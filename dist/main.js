(()=>{"use strict";function e(e){let t=document.getElementById("task-list-start"),n=(document.getElementById("task-row"),function(e){let t=e.getFullYear();return(1+e.getMonth()).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t}(e.data().dueDate.toDate())),o=document.createElement("li");o.classList.add("task"),o.innerHTML=`<div class="task-description" data-id="${e.id}">\n    <div class="round">\n      <input type="checkbox" id="${e.id}"/>\n      <label for="${e.id}"></label>\n    </div>\n    \n    <label class="task-label">${e.data().title}\n    <p class="task-details">${e.data().project}</p>\n  </label>\n  </div>\n\n  <div class="task-action">\n    \n  <p class="due-date">${n}</p>\n  </div>`,t.appendChild(o),t.appendChild(document.createElement("hr"));let d=document.getElementById(e.id);console.log(d),d.addEventListener("click",(function(){!function(e,t){e.checked?db.collection("tasks").doc(t).update({done:"true"}):db.collection("tasks").doc(t).update({done:"false"})}(d,e.id)})),function(e){e.data().done&&document.getElementById(e.id).click()}(e)}function t(){var e=document.querySelector("#task-dueDate"),t=new Date;e.value=t.getFullYear().toString()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0),e.min=t.getFullYear().toString()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0)}function n(n){let o=document.getElementById("project-list"),d=document.getElementById("new-project"),l=document.createElement("li");l.classList.add("sub-item"),l.innerHTML=`<a href="#" class="navbar__link project" data-id=${n.id}>\n    ${n.data().title}</a>`,l.addEventListener("click",(function(){var o;o=n.data().title,console.log("trying gggg to render"),document.querySelector("#heading .title").innerHTML=o,document.getElementById("task-list-start").innerHTML="",function(n){db.collection("tasks").where("project","==",n).get().then((t=>{t.docs.forEach((t=>{e(t)}))})),t()}(o)})),o.insertBefore(l,d)}function o(){db.collection("tasks").get().then((t=>{t.docs.forEach((t=>{e(t)}))})),t()}function d(){var e=(new Date).toString().split(" ").splice(1,3).join(" ");document.querySelector(".date").innerHTML=e}console.log("in the js file"),console.log(firebase),document.getElementById("today-page").hidden=!1,document.querySelector("#heading .title").innerHTML="All Tasks",document.getElementById("task-list-start").innerHTML="",o(),db.collection("projects").get().then((e=>{e.docs.forEach((e=>{n(e)}))})),d(),document.getElementById("new-task-btn").addEventListener("click",(function(){console.log("WE CLICKED THE BUTTON"),document.getElementById("task-row").style.display="none",function(){let e,t;console.log("render drop down"),e=document.querySelector("#task-form select"),e.innerHTML="",db.collection("projects").get().then((n=>{n.docs.forEach((n=>{console.log("is this",n.data().title),t=document.createElement("option"),t.innerHTML=n.data().title,e.appendChild(t)}))}))}(),document.getElementById("task-form").hidden=!1})),document.getElementById("form-cancel").addEventListener("click",(function(){document.getElementById("task-row").style.display="inline-block",document.getElementById("task-form").hidden=!0})),console.log("here we are"),document.getElementById("new-project").addEventListener("click",(function(){let e=document.getElementById("project-form"),t=document.getElementById("input-project-title"),n=document.getElementById("new-project");n.style.display="none",e.hidden=!1,t.focus(),t.addEventListener("blur",(()=>{document.getElementById("project-form").hidden=!0,n.style.display="block"}))})),console.log("here we are"),document.querySelector("#task-form").addEventListener("submit",(function(t){console.log("are we in here or not");const n=document.querySelector("#task-form");t.preventDefault();let o=new Date(n.dueDate.value+"T00:00:00");console.log(o);let d=new firebase.firestore.Timestamp.fromDate(o);console.log(d);let l=n.title.value;db.collection("tasks").add({done:!1,dueDate:d,project:n.project.value,title:l}),db.collection("tasks").where("title","==",l).get().then((t=>{t.docs.forEach((t=>{console.log("DOC",t),e(t)}))})),n.reset()})),document.querySelector("#project-form").addEventListener("submit",(function(e){console.log("are we in here or not");const t=document.querySelector("#project-form");e.preventDefault();let o=t.title.value;console.log("new title",o),db.collection("projects").add({title:o}),db.collection("projects").where("title","==",o).get().then((e=>{e.docs.forEach((e=>{console.log("DOC",e),n(e)}))})),t.reset()})),document.getElementById("due-date-header").addEventListener("click",(function(){document.getElementById("due-date-header").dataset.order,document.getElementById("task-list-start").innerHTML="","desc"==document.getElementById("due-date-header").dataset.order?(db.collection("tasks").orderBy("dueDate","asc").get().then((t=>{t.docs.forEach((t=>{e(t)}))})),document.getElementById("due-date-header").dataset.order="asc"):(db.collection("tasks").orderBy("dueDate","desc").get().then((t=>{t.docs.forEach((t=>{e(t)}))})),t(),document.getElementById("due-date-header").dataset.order="desc")})),document.getElementById("home-btn").addEventListener("click",(function(){document.getElementById("today-page").hidden=!1,document.querySelector("#heading .title").innerHTML="All Tasks",document.getElementById("task-list-start").innerHTML="",o(),d()}))})();